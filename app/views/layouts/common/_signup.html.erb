<div class="row margin-vert-30">
  <div class="col-md-4 col-md-offset-4 col-sm-offset-3">
    <%= form_for @user, method: :post, authenticity_token: true, html:{:class =>"signup-page", :id=>"register" } do |f| %>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <div class="signup-header">
      <h2>Register a new account</h2>
      <p>Already a member? Click
       <%= link_to "HERE ", new_session_path,:method=> :get, remote: true, 'data-toggle' => 'modal','data-target'=>'#myModal' %>to login to your account.</p>
     </div>

     <div class="row margin-bottom-20">
      <img src="assets/avatar.png" id="default-thumb" class="user-thumbnail">
      <div class="col-sm-3 thumb-image">
         <img id="preview" class="thumb_size"/>
     </div>
   </div>

   <div class= "upload_thumbnail">
     <span class="glyphicon glyphicon-camera gi-5x fileinput-button">
       <!-- <input type="file" name="user[thumbnail]" id="exampleInputFile"> -->
       <%= f.file_field :thumbnail, id: "exampleInputFile"%> <b>Choose Profile Image</b>
     </span>
   </div>

   <label for="Name">Name
    <span class="color-red">*</span>
  </label>
  <%= f.text_field :name, :class=>"form-control margin-bottom-20", :placeholder=>"Name", :required => true%>

  <label for="inputEmail">Email id
    <span class="color-red">*</span>
  </label>
  <%= f.email_field :email, :class=>"form-control margin-bottom-20",:id=>"user_email", :placeholder=>"Email", :required => true%>

  <div class="row">
   <div class="col-sm-6">
    <label for="inputPassword">Password
      <span class="color-red">*</span>
    </label>
    <%= f.password_field :password, :class=>"form-control margin-bottom-20", :placeholder=>"Password", :id => "password", :required => true%>
  </div>
  <div class="col-sm-6">
    <label for="inputPassword">Confirm 
      <span class="color-red">*</span>
    </label>
    <%= f.password_field :password_confirmation, :class=>"form-control margin-bottom-20", :id => "confirm_password", :placeholder=>"confirmation password", :required => true%>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-sm-9">
    <label class="checkbox col-sm-12">
      <input type="checkbox" required>I read the
      <a href="#">Terms and Conditions</a>
    </label>
  </div>
  <%= f.submit "Register", :class=>"btn btn-primary" %>
</div>
<%end%>
</div>
</div>


<script>
  setTimeout(function(){ $("#exampleInputFile").change(function(){
    if (this.files && this.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $('#preview').attr('src', e.target.result);
        var img = document.getElementById('default-thumb');
        img.style.visibility = 'hidden';
      }
      reader.readAsDataURL(this.files[0]);
    }
  }); }, 400);

  var password = document.getElementById("password")
  , confirm_password = document.getElementById("confirm_password");

  function validatePassword(){
    if(password.value != confirm_password.value) {
      confirm_password.setCustomValidity("Passwords Don't Match");
    } else {
      confirm_password.setCustomValidity('');
    }
  }

  password.onchange = validatePassword;
  confirm_password.onkeyup = validatePassword;

</script>